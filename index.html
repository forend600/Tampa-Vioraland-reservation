<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø¹Ù‚Ø¯ Ø¥ÙŠØ¬Ø§Ø± Ù…Ù†ØªØ¬Ø¹</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#2980b9">
Â  <link rel="manifest" href="manifest.json">
<script>
Â  if ('serviceWorker' in navigator) {
Â  Â  navigator.serviceWorker.register('service-worker.js');
Â  }
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
:root{ --brand-blue:#2980b9; }
body{
Â  font-family:'Times New Roman', Arial, Tahoma, sans-serif;
Â  direction:rtl; margin:0; padding:0; background:#fdf5e6; text-align:right;
}
.container{
Â  max-width:800px; margin:16px auto; padding:20px; background:#fff;
Â  border-radius:14px; border:3px solid var(--brand-blue);
}
h1{text-align:center; color:#2c3e50; font-size:26px;}
.title-underline{width:140px; height:3px; background:var(--brand-blue); margin:6px auto 12px; border-radius:2px;}
.booking-number{color:#e53935; font-weight:bold; font-size:22px; text-align:center;}
.info-row{margin:6px 0;}
.dates-block{background:#f9f9f9; border:1px solid #ccc; border-radius:8px; padding:10px; margin:12px 0; font-size:15px;}
.terms li{margin:6px 0;}
.season-note{color:#c62828; font-weight:bold;}
.contract-footer{text-align:center; font-size:12px; color:#555; margin-top:18px;}
form{
Â  max-width:520px; margin:18px auto; background:#fff;
Â  padding:16px; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,.07);
}
label{display:block; margin-top:12px; font-weight:bold; text-align: right;}
input,select{width:100%; padding:10px; margin-top:6px; border-radius:8px; border:1px solid #ccc; text-align: right;}
.options-row{display:flex; flex-wrap:wrap; justify-content:space-between; gap:12px; margin-top:16px;}
.option-block{display:flex; align-items:center; gap:6px;}
.option-block input[type="checkbox"] { width: auto; margin-top: 0; }
.option-block label { margin-top: 0; font-weight: normal; }

button{padding:12px; background:#27ae60; color:#fff; border:none; border-radius:10px; cursor:pointer; width:100%; margin-top:16px;}
.btn{background:var(--brand-blue); color:#fff; border:none; padding:12px 16px; border-radius:10px; cursor:pointer;}
.btn-whatsapp{background:#25d366;}
.actions{display:flex; flex-wrap:wrap; gap:10px; justify-content:center; margin-top:10px;}
@media print {.container{border:3px solid var(--brand-blue)!important;}}
</style>
</head>
<body>

<form id="bookingForm">
Â  <label>Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†ØªØ¬Ø¹:</label>
Â  <select id="resortSelect" required>
Â  Â  <option value="" disabled selected>Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†ØªØ¬Ø¹</option>
Â  Â  <option value="Ù…Ù†ØªØ¬Ø¹ ØªØ§Ù…Ø¨Ø§">Ù…Ù†ØªØ¬Ø¹ ØªØ§Ù…Ø¨Ø§</option>
Â  Â  <option value="Ù…Ù†ØªØ¬Ø¹ ÙÙŠÙˆØ±Ø§Ù„Ø§Ù†Ø¯">Ù…Ù†ØªØ¬Ø¹ ÙÙŠÙˆØ±Ø§Ù„Ø§Ù†Ø¯</option>
Â  </select>

Â  <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±:</label>
Â  <input type="text" id="customerName" required>

Â  <label>Ø§Ù„Ø¹Ø±Ø¨ÙˆÙ† (Ø±ÙŠØ§Ù„):</label>
Â  <input type="number" id="deposit" min="0" required>

Â  <label>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ (Ø±ÙŠØ§Ù„):</label>
Â  <input type="number" id="remaining" min="0" required>

Â  <label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¬Ø²:</label>
Â  <input type="date" id="bookingDate" required>

Â  <div class="options-row">
Â  Â  <div class="option-block">
Â  Â  Â  <input type="checkbox" id="overnight"><label for="overnight">Ù…Ø¨ÙŠØª</label>
Â  Â  </div>
Â  Â  <div class="option-block">
Â  Â  Â  <input type="checkbox" id="noPool"><label for="noPool">Ø¨Ø¯ÙˆÙ† Ù…Ø³Ø¨Ø­</label>
Â  Â  </div>
    <div class="option-block">
      <input type="checkbox" id="winterPeriod"><label for="winterPeriod">ÙØªØ±Ø© Ø§Ù„Ø´ØªØ§Ø¡</label>
    </div>
Â  Â  <div class="option-block" id="tampaOptions" style="display:none;">
Â  Â  Â  <span>Ø®Ø§Øµ Ø¨Ù…Ù†ØªØ¬Ø¹ ØªØ§Ù…Ø¨Ø§:</span>
Â  Â  Â  <input type="checkbox" id="summer"><label for="summer">ØµÙŠÙ</label>
Â  Â  Â  <input type="checkbox" id="winter"><label for="winter">Ø´ØªØ§Ø¡</label>
Â  Â  </div>
Â  </div>
Â  <button type="submit">Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù‚Ø¯</button>
</form>

<div id="contract" class="container" style="display:none;">
Â  <h1 id="contractTitle"></h1>
Â  <div class="title-underline"></div>
Â  <div id="bookingNumber" class="booking-number"></div>
Â  <div id="introTextContainer"></div>
Â  <div id="bookingInfo"></div>
Â  <hr>
Â  <div class="terms">
Â  Â  <h3>Ø§Ù„Ø´Ø±ÙˆØ·:</h3>
Â  Â  <ul id="termsList"></ul>
Â  Â  <p><strong>Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ø±Ø¯ Ø¨ÙƒÙ„Ù…Ø© Ù…ÙˆØ§ÙÙ‚</strong></p>
Â  </div>
Â  <div id="contractFooter" class="contract-footer"></div>

Â  <div class="actions">
Â  Â  <button id="saveAllBtn" class="btn">Ø­ÙØ¸ ÙˆÙ…Ø´Ø§Ø±ÙƒØ© (ÙˆØ§ØªØ³Ø§Ø¨)</button>
Â  Â  <button id="calendarICSBtn" class="btn">Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„ØªÙ‚ÙˆÙŠÙ…</button>
Â  </div>
</div>

<script>
const form=document.getElementById('bookingForm');
const contract=document.getElementById('contract');
const contractTitle=document.getElementById('contractTitle');
const bookingNumberEl=document.getElementById('bookingNumber');
const introTextContainer=document.getElementById('introTextContainer');
const bookingInfo=document.getElementById('bookingInfo');
const termsList=document.getElementById('termsList');
const contractFooter=document.getElementById('contractFooter');

const saveAllBtn=document.getElementById('saveAllBtn');
const calendarICSBtn=document.getElementById('calendarICSBtn');Â 

// === (Ø¬Ø¯ÙŠØ¯) JavaScript: Ø¬Ù„Ø¨ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ÙˆØ®ÙŠØ§Ø±Ø§Øª ØªØ§Ù…Ø¨Ø§ ===
const resortSelect = document.getElementById('resortSelect');
const tampaOptions = document.getElementById('tampaOptions');

const overnight=document.getElementById('overnight');
const noPool=document.getElementById('noPool');
// === (Ø¬Ø¯ÙŠØ¯) JavaScript: Ø¬Ù„Ø¨ Ø¹Ù†ØµØ± "ÙØªØ±Ø© Ø§Ù„Ø´ØªØ§Ø¡" ===
const winterPeriod=document.getElementById('winterPeriod');
const summer=document.getElementById('summer');
const winter=document.getElementById('winter');

summer.addEventListener('change',()=>{if(summer.checked)winter.checked=false;});
winter.addEventListener('change',()=>{if(winter.checked)summer.checked=false;});
// === (Ø¬Ø¯ÙŠØ¯) JavaScript: Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„ØªØºÙŠÙŠØ± ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø¹ ===
resortSelect.addEventListener('change', () => {
  if (resortSelect.value === 'Ù…Ù†ØªØ¬Ø¹ ØªØ§Ù…Ø¨Ø§') {
    tampaOptions.style.display = 'flex'; // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª
  } else {
    tampaOptions.style.display = 'none'; // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª
    // Ø¥Ù„ØºØ§Ø¡ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø¹Ù†Ø¯ Ø¥Ø®ÙØ§Ø¦Ù‡Ø§ Ù„Ø¶Ù…Ø§Ù† ØµØ­Ø© Ø§Ù„Ø¹Ù‚Ø¯
    summer.checked = false;
    winter.checked = false;
  }
});

function formatDate(d){
Â const days=["Ø§Ù„Ø£Ø­Ø¯","Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†","Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡","Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø§Ù„Ø®Ù…ÙŠØ³","Ø§Ù„Ø¬Ù…Ø¹Ø©","Ø§Ù„Ø³Ø¨Øª"];
Â const months=["ÙŠÙ†Ø§ÙŠØ±","ÙØ¨Ø±Ø§ÙŠØ±","Ù…Ø§Ø±Ø³","Ø£Ø¨Ø±ÙŠÙ„","Ù…Ø§ÙŠÙˆ","ÙŠÙˆÙ†ÙŠÙˆ","ÙŠÙˆÙ„ÙŠÙˆ","Ø£ØºØ³Ø·Ø³","Ø³Ø¨ØªÙ…Ø¨Ø±","Ø£ÙƒØªÙˆØ¨Ø±","Ù†ÙˆÙÙ…Ø¨Ø±","Ø¯ÙŠØ³Ù…Ø¨Ø±"];
Â return `${days[d.getDay()]} ${d.getDate()} ${months[d.getMonth()]} ${d.getFullYear()}`;
}
function getBaseTerms(){
Â  return [
Â  Â  "Ø§Ù„Ø¹Ø±Ø¨ÙˆÙ† ØºÙŠØ± Ù…Ø³ØªØ±Ø¯",
Â  Â  "Ø§Ù„Ù…Ù†ØªØ¬Ø¹ ØºÙŠØ± Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ø£ØºØ±Ø§Ø¶ Ø§Ù„Ø´Ø®ØµÙŠØ©",
Â  Â  "ÙÙŠ Ø­Ø§Ù„ Ø§Ù„Ø£Ø¶Ø±Ø§Ø± Ø§Ù„Ù…Ø§Ø¯ÙŠØ© ÙŠØªØ­Ù…Ù„ Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø± ÙƒØ§ÙØ© Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ",
Â  Â  "ÙŠÙ…Ù†Ø¹ Ø§Ù„ØªØ¯Ø®ÙŠÙ† Ø¯Ø§Ø®Ù„ ØºØ±Ù ÙˆØµØ§Ù„Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø¹ ğŸš­",
Â  Â  "ÙŠØ¬Ø¨ Ø¥Ø¨Ù„Ø§Øº Ø§Ù„Ø­Ø§Ø±Ø³ ÙˆÙ‚Øª Ø§Ù„Ø®Ø±ÙˆØ¬ Ù„Ø¥Ø®Ù„Ø§Ø¡ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©",
Â  Â  "Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ø®Ø±ÙˆØ¬ Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©"
Â  ];
}
function getSeasonTerms(){
Â  const t=[];
Â  if(summer.checked)t.push({text:"Ø§Ù„Ù…Ù„Ø¹Ø¨ Ø§Ù„ØµØ§Ø¨ÙˆÙ†ÙŠ Ù„Ù„Ø£Ø·ÙØ§Ù„ ÙˆÙŠØªØ­Ù…Ù„ Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø± Ø£ÙŠ ØªÙ„ÙÙŠØ§Øª ÙÙŠ Ø§Ù„Ù…Ù„Ø¹Ø¨ Ø§Ù„ØµØ§Ø¨ÙˆÙ†ÙŠ",className:"season-note"});
Â  if(winter.checked)t.push({text:"ÙŠØ±Ø¬Ù‰ Ø¹Ø¯Ù… Ø¥Ø´Ø¹Ø§Ù„ Ø§Ù„Ù†Ø§Ø± Ø¯Ø§Ø®Ù„ Ø§Ù„Ø®ÙŠÙ…Ø© Ø£Ùˆ Ø¹Ù„Ù‰ Ø§Ù„Ø²ÙŠÙ„",className:"season-note"});
Â  return t;
}
function renderTerms(){
Â  termsList.innerHTML="";
Â  getBaseTerms().forEach(t=>{
Â  Â  const li=document.createElement('li');li.textContent=t;termsList.appendChild(li);
Â  });
Â  getSeasonTerms().forEach(t=>{
Â  Â  const li=document.createElement('li');li.className=t.className;li.textContent=t.text;termsList.appendChild(li);
Â  });
}
function formatDateForCal(d){
Â const y=d.getFullYear(),m=String(d.getMonth()+1).padStart(2,'0'),da=String(d.getDate()).padStart(2,'0');
Â return `${y}${m}${da}`;
}

form.addEventListener('submit',e=>{
Â  e.preventDefault();
  // === (ØªØ¹Ø¯ÙŠÙ„) JavaScript: Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ØªØºÙŠØ± Ø§Ù„Ù…Ø¹Ø±Ù Ù…Ø³Ø¨Ù‚Ø§Ù‹ ===
Â  const resort = resortSelect.value;
Â  const name=document.getElementById('customerName').value;
Â  const dep=document.getElementById('deposit').value;
Â  const rem=document.getElementById('remaining').value;
Â  const date=new Date(document.getElementById('bookingDate').value+"T00:00:00");

  // === (ØªØ¹Ø¯ÙŠÙ„) JavaScript: Ù…Ù†Ø·Ù‚ ØªØ­Ø¯ÙŠØ¯ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø­Ø¬Ø² ===
  let hours;
  if (winterPeriod.checked) {
    // New Winter Period logic
    if (overnight.checked) {
      hours = "Ù…Ù† Ù¢ Ù…Ø³Ø§Ø¡Ù‹ Ø¥Ù„Ù‰ Ù¡Ù  ØµØ¨Ø§Ø­Ù‹Ø§"; // Winter + Overnight
    } else {
      hours = "Ù…Ù† Ù¢ Ù…Ø³Ø§Ø¡Ù‹ Ø¥Ù„Ù‰ Ù¢ ØµØ¨Ø§Ø­Ù‹Ø§"; // Winter only
    }
  } else {
    // Normal Period logic
    hours = `Ù…Ù† Ù£ Ù…Ø³Ø§Ø¡Ù‹ Ø¥Ù„Ù‰ ${overnight.checked ? "Ù¡Ù¡ ØµØ¨Ø§Ø­Ù‹Ø§" : "Ù¦ ØµØ¨Ø§Ø­Ù‹Ø§"}`;
  }
Â Â 
  // (ØªØ¹Ø¯ÙŠÙ„) Ø§Ø³ØªØ®Ø¯Ù…Øª darkred Ùˆ darkgreen ÙƒÙ…Ø§ Ø·Ù„Ø¨Øª Ø³Ø§Ø¨Ù‚Ø§Ù‹
Â  const hoursColor = overnight.checked ? "red" : "green"; 
Â Â 
Â  const today=formatDate(new Date());
Â  const bookingNumber=resort==="Ù…Ù†ØªØ¬Ø¹ ØªØ§Ù…Ø¨Ø§"?"0117":"201";

Â  contractTitle.textContent=`Ø¹Ù‚Ø¯ Ø¥ÙŠØ¬Ø§Ø± ${resort}`;
Â  bookingNumberEl.textContent=`Ø±Ù‚Ù… Ø§Ù„Ø­Ø¬Ø²: ${bookingNumber}`;
Â  introTextContainer.innerHTML=`<p style="text-align:center;font-size:17px;">Ø£ÙØ¨Ø±Ù… Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù‚Ø¯ Ø¨ÙŠÙ† Ø§Ù„Ø·Ø±ÙÙŠÙ†:<br>Ø§Ù„Ø·Ø±Ù Ø§Ù„Ø£ÙˆÙ„: ${resort}<br>ÙˆØ§Ù„Ø·Ø±Ù Ø§Ù„Ø«Ø§Ù†ÙŠ: ${name}<br>ÙˆØ°Ù„Ùƒ ÙˆÙÙ‚Ù‹Ø§ Ù„Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù… Ø§Ù„Ù…ÙˆØ¶Ø­Ø© Ø£Ø¯Ù†Ø§Ù‡.</p>`;
Â Â 
  // === (ØªØ¹Ø¯ÙŠÙ„) JavaScript: Ø¥Ø¸Ù‡Ø§Ø± Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø¨ÙŠØª ÙˆØ§Ù„Ù…Ø³Ø¨Ø­ Ø¯Ø§Ø¦Ù…Ø§Ù‹ ===
Â  bookingInfo.innerHTML=`<div class="info-row"><b>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±:</b> ${name}</div>
Â  <div class="info-row"><b>Ø§Ù„Ø¹Ø±Ø¨ÙˆÙ†:</b> ${dep} Ø±ÙŠØ§Ù„</div>
Â  <div class="info-row"><b>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ:</b> ${rem} Ø±ÙŠØ§Ù„</div>
Â  <div class="info-row"><b>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¬Ø²:</b> ${formatDate(date)}</div>
Â  <div class="info-row" style="color: ${hoursColor}; font-weight: bold;"><b>Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø­Ø¬Ø²:</b> ${hours}</div>
  ${overnight.checked ? 
    `<div class="info-row" style="color: green; font-weight: bold; margin-top: 20px;"><b>ÙŠØ´Ù…Ù„ Ù…Ø¨ÙŠØª</b></div>` : 
    `<div class="info-row" style="color: red; font-weight: bold; margin-top: 20px;"><b>Ø¨Ø¯ÙˆÙ† Ù…Ø¨ÙŠØª</b></div>`
  }
Â  ${noPool.checked ? 
    `<div class="info-row" style="color: red; font-weight: bold;"><b>Ø¨Ø¯ÙˆÙ† Ù…Ø³Ø¨Ø­</b></div>` : 
    `<div class="info-row" style="color: green; font-weight: bold;"><b>ÙŠØ´Ù…Ù„ Ù…Ø³Ø¨Ø­</b></div>`
  }`;
Â Â 
Â  renderTerms();
Â  contractFooter.innerHTML=`ØªØ§Ø±ÙŠØ® ØªØ­Ø±ÙŠØ± Ø§Ù„Ø¹Ù‚Ø¯: ${today}<br>ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù‚Ø¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠÙ‹Ø§ â€” ${resort}`;
Â  contract.style.display="block";

Â  // --- ÙˆØ¸ÙŠÙØ© Ø²Ø± Ø§Ù„Ø­ÙØ¸ ÙˆØ§Ù„Ù…Ø´Ø§Ø±ÙƒØ© (ØµÙˆØ±Ø© + ÙˆØ§ØªØ³Ø§Ø¨) ---
Â  saveAllBtn.onclick = function() {
Â  Â static // (Ù„Ø§ ØªØºÙŠÙŠØ± Ù‡Ù†Ø§ØŒ Ø§Ù„Ù…ØªØºÙŠØ± "hours" Ù…Ø­Ø¯Ø« ÙˆØ¬Ø§Ù‡Ø²)
Â  Â  // 1. ÙˆØ¸ÙŠÙØ© Ø­ÙØ¸ Ø§Ù„ØµÙˆØ±Ø©
Â  Â  document.querySelector('.actions').style.display = 'none'; // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
Â  Â  html2canvas(contract, { scale: 2, useCORS: true }).then(canvas => {
Â  Â  Â  const link = document.createElement('a');
Â  Â  Â  link.download = `${name}.png`;
Â  Â  Â  link.href = canvas.toDataURL('image/png');
Â  Â  Â  link.click();
Â  Â  Â  document.querySelector('.actions').style.display = 'flex'; // Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø£Ø²Ø±Ø§Ø±

Â  Â  Â  // 2. ÙˆØ¸ÙŠÙØ© ÙˆØ§ØªØ³Ø§Ø¨
Â  Â  Â  const info={
Â  Â  Â  Â  "Ù…Ù†ØªØ¬Ø¹ ØªØ§Ù…Ø¨Ø§":{phone:"0567863628",location:"https://maps.app.goo.gl/LbCoDDtuyqz9AB237"},
Â  Â  Â  Â  "Ù…Ù†ØªØ¬Ø¹ ÙÙŠÙˆØ±Ø§Ù„Ø§Ù†Ø¯":{phone:"0567863628",location:"https://maps.app.goo.gl/NkGwhmAN6eur34Xi6"}
Â  Â  Â  }[resort];
Â  Â  Â  const msg=[
Â  Â  Â  Â  `Ø¹Ù‚Ø¯ Ø¥ÙŠØ¬Ø§Ø± ${resort}`,
Â  Â  Â  Â  `Ø±Ù‚Ù… Ø§Ù„Ø­Ø¬Ø²: ${bookingNumber}`,
Â  Â  Â  Â  `Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±: ${name}`,
Â  Â  Â  Â  `Ø§Ù„ØªØ§Ø±ÙŠØ®: ${formatDate(date)}`,
Â  Â  Â  Â  `Ø§Ù„ÙˆÙ‚Øª: ${hours}`, // Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØºÙŠØ± ØµØ­ÙŠØ­
Â  Â  Â  Â  `Ø§Ù„Ø¹Ø±Ø¨ÙˆÙ†: ${dep} Ø±ÙŠØ§Ù„`,
Â  Â  Â  Â  `Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${rem} Ø±ÙŠØ§Ù„`,
Â  Â  Â  Â  overnight.checked?"ÙŠØ´Ù…Ù„ Ù…Ø¨ÙŠØª âœ…":"Ø¨Ø¯ÙˆÙ† Ù…Ø¨ÙŠØª",
Â  Â  Â  Â  noPool.checked ? "Ø¨Ø¯ÙˆÙ† Ù…Ø³Ø¨Ø­ âŒ" : "ÙŠØ´Ù…Ù„ Ù…Ø³Ø¨Ø­ âœ…",
Â  Â  Â  Â  "",
Â  Â  Â  Â  "Ø§Ù„Ø´Ø±ÙˆØ·:",
Â  Â  Â  Â  ...getBaseTerms(),
Â  Â  Â  Â  ...getSeasonTerms().map(x=>x.text),
Â  Â  Â  Â  "",
Â  Â  Â  Â  `ğŸ“ Ø±Ù‚Ù… Ø§Ù„Ø­Ø§Ø±Ø³: ${info.phone}`,
Â  Â  Â  Â  `ğŸ“ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ù†ØªØ¬Ø¹: ${info.location}`,
Â  Â  Â  Â  "",
Â  Â  Â  Â  `ØªØ§Ø±ÙŠØ® ØªØ­Ø±ÙŠØ± Ø§Ù„Ø¹Ù‚Ø¯: ${today}`,
Â  Â  Â  Â  `ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù‚Ø¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠÙ‹Ø§ â€” ${resort}`,
Â  Â  Â  Â  "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ø±Ø¯ Ø¨ÙƒÙ„Ù…Ø©: Ù…ÙˆØ§ÙÙ‚"
Â  Â  Â  ].join('\n');
Â  Â  Â  window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`,'_blank');
Â  Â  });
Â  };

Â  // --- ÙˆØ¸ÙŠÙØ© Ø²Ø± Ø§Ù„ØªÙ‚ÙˆÙŠÙ… (Ø±Ø§Ø¨Ø· Ø¬ÙˆØ¬Ù„) ---
Â  calendarICSBtn.onclick = () => {
Â  Â  // (Ù„Ø§ ØªØºÙŠÙŠØ± Ù‡Ù†Ø§ØŒ Ø§Ù„Ù…ØªØºÙŠØ± "hours" Ù…Ø­Ø¯Ø« ÙˆØ¬Ø§Ù‡Ø²)
Â  Â  // 1. Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¬Ø¯ÙŠØ¯ (Ù…Ø¹ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø®Ø§Ù†Ø§Øª)
Â  Â  let title = `${name} ${dep}-${rem}`; // Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
Â  Â  if (overnight.checked) {
Â  Â  Â  Â  title += " (Ù…Ø¨ÙŠØª)"; // Ø¥Ø¶Ø§ÙØ© "Ù…Ø¨ÙŠØª"
Â  Â  }
Â  Â  if (noPool.checked) {
Â  Â  Â  Â  title += " (Ø¨Ø¯ÙˆÙ† Ù…Ø³Ø¨Ø­)"; // Ø¥Ø¶Ø§ÙØ© "Ø¨Ø¯ÙˆÙ† Ù…Ø³Ø¨Ø­"
Â  Â  }
    if (winterPeriod.checked) {
        title += " (ÙØªØ±Ø© Ø´ØªÙˆÙŠØ©)"; // (Ø¬Ø¯ÙŠØ¯) Ø¥Ø¶Ø§ÙØ© ÙØªØ±Ø© Ø´ØªÙˆÙŠØ©
    }

Â  Â  // 2. Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªÙˆØ§Ø±ÙŠØ® (ÙŠÙˆÙ… ÙƒØ§Ù…Ù„)
Â  Â  const startDate = formatDateForCal(date);
Â  Â  const nextDay = new Date(date.getTime() + 86400000); // Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ØªØ§Ù„ÙŠ
Â  Â  const endDate = formatDateForCal(nextDay);
Â  Â Â 
Â  Â  // 3. Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªÙØ§ØµÙŠÙ„
Â  Â  const allTerms = [...getBaseTerms(), ...getSeasonTerms().map(x => x.text)].join('\n- ');
Â  Â  const details = [
Â  Â  Â  `Ø§Ù„Ù…Ù†ØªØ¬Ø¹: ${resort}`,
Â  Â  Â  `Ø±Ù‚Ù… Ø§Ù„Ø­Ø¬Ø²: ${bookingNumber}`,
Â  Â  Â  `Ø§Ù„ØªØ§Ø±ÙŠØ®: ${formatDate(date)}`,
Â  Â  Â  `Ø§Ù„Ø¹Ø±Ø¨ÙˆÙ†: ${dep} Ø±ÙŠØ§Ù„`,
Â  Â  Â  `Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${rem} Ø±ÙŠØ§Ù„`,
Â  Â  Â  overnight.checked ? "ÙŠØ´Ù…Ù„ Ù…Ø¨ÙŠØª âœ…" : "Ø¨Ø¯ÙˆÙ† Ù…Ø¨ÙŠØª",
Â  Â  Â  noPool.checked ? "Ø¨Ø¯ÙˆÙ† Ù…Ø³Ø¨Ø­ âŒ" : "ÙŠØ´Ù…Ù„ Ù…Ø³Ø¨Ø­ âœ…",
Â  Â  Â  `Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø­Ø¬Ø²: ${hours}`, // Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØºÙŠØ± ØµØ­ÙŠØ­
Â  Â  Â  "",
Â  Â  Â  "Ø§Ù„Ø´Ø±ÙˆØ·:",
Â  Â  Â  `- ${allTerms}`
Â  Â  ].join('\n'); // Ø¬ÙˆØ¬Ù„ ÙŠÙÙ‡Ù… \n ÙÙŠ Ø§Ù„ØªÙØ§ØµÙŠÙ„

Â  Â  // 4. Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹
Â  Â  const resortLocation = {
Â  Â  Â  "Ù…Ù†ØªØ¬Ø¹ ØªØ§Ù…Ø¨Ø§": "https://maps.app.goo.gl/LbCoDDtuyqz9AB237",
Â  Â  Â  "Ù…Ù†ØªØ¬Ø¹ ÙÙŠÙˆØ±Ø§Ù„Ø§Ù†Ø¯": "https://maps.app.goo.gl/NkGwhmAN6eur34Xi6"
Â  Â  }[resort];
Â  Â  Â Â 
Â  Â  // 5. Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø·
Â  Â  const params = new URLSearchParams();
Â  Â  params.append('action', 'TEMPLATE');
Â  Â  params.append('text', title);
Â  Â  params.append('dates', `${startDate}/${endDate}`); // ØµÙŠØºØ© ÙŠÙˆÙ… ÙƒØ§Ù…Ù„
Â  Â  params.append('details', details);
Â  Â  params.append('location', resortLocation);
Â  Â  params.append('sf', 'true');
Â  Â  params.append('output', 'chrome');

Â  Â  const googleCalendarUrl = `https://www.google.com/calendar/render?${params.toString()}`;

Â  Â  // 6. ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø· ÙÙŠ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø©
Â  Â  window.open(googleCalendarUrl, '_blank');
Â  };
});
</script>
</body>

</html>
